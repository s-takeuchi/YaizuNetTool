<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="content-style-type" content="text/css">
<link rel="stylesheet" href="./style.css" type="text/css">
</HEAD>

<BODY>
<style type="text/css">
<!--
.spc { margin-left: 2em; margin-right: 0em; }
-->
</style>

<div id="container">
<H1>4. ネットワークの設定</H1>
<H2 ID="4.1">4.1 ループバックネットワークアダプタ</H2>
ネットワーク上の複数の要素の振る舞いをStkFwでシミュレートするため，複数のIPアドレスをStkFwの
処理要素に割り当てる必要があります。ループバックネットワークアダプタを追加することで，既存のネットワーク
に影響を与えることなく，複数のIPアドレスをStkFwの処理要素に割り当てることができます。<BR>
スタートメニュー[StkFw]-[Tools]-[Lbadpt]をクリックすることにより，
ループバックネットワークアダプタ追加／削除ダイアログが起動します。<BR>
[Install]ボタンを押下するとループバックネットワークアダプタを追加します。
[Remove]ボタンを押下するとループバックネットワークアダプタを削除します。<P>
<P>

<H2 ID="4.2">4.2 IPアドレスの追加／削除</H2>
IPアドレスウィザードは複数のIPアドレスを，指定したネットワークアダプタに追加，またはネットワークアダプタ
から削除します。一度に多数のIPアドレスを追加または削除することができます。<BR>
IPアドレスウィザードでIPアドレスを追加／削除する手順を以下に示します。<BR>
<OL>
<LI>スタートメニュー[StkFw]-[Tools]-[IP Address Wizard]を選択し
IPアドレスウィザードを起動します。<BR>
<LI>操作対象のネットワークアダプタを選択します。<BR><IMG SRC="ipaddr1.jpg"><BR>
<LI>操作種別（追加または削除），操作開始IPアドレス，操作を繰り返す回数，サブネットマスクを指定します
（操作種別が削除の場合，サブネットマスクの設定は不要です）。<BR><IMG SRC="ipaddr2.jpg"><BR>
</OL> 
<UL>
<LI>IPアドレスウィザードはIPv4のみサポートします。IPv6形式のIPアドレスは扱うことができません。<BR>
<LI>IPアドレスウィザードは最大11個のネットワークアダプタを扱うことができます。11個以上の
ネットワークアダプタをオペレーティングシステムが認識している場合，IPアドレスウィザードは最初に見つけた11個のネットワーク
アダプタのみ有効なものとして扱います。<BR>
<LI>ネットワークアダプタから全てのIPアドレスの削除を試みたときの挙動は不定です。
（オペレーティングシステムによってはネットワークアダプタに何もIPアドレスが登録されていない状態を許しません。
削除後も対象のIPアドレスが残り続ける場合や，削除操作がエラーになる場合があります。）
</UL>
処理要素を限定されたネットワークの範囲でアクセスさせる場合は，ループバックネットワークアダプタに
追加したIPアドレスを処理要素に割り当ててください。<BR>
これにより既設のネットワークの構成を変更することなく，限定されたネットワークの範囲でテスト支援環境を
構築することができます。<br>
すべての処理要素をローカルコンピュータ内からアクセスするために，必ずしもループバックネットワークアダプタに
割り当てられたIPアドレスを使用する必要はなく，ループバックIPアドレス(一般的には，127.*.*.*となるIPアドレス)
を使用することでこれを実現することができます。ただし，リモートコンピュータからアクセスするためには
ループバックネットワークアダプタ上のIPアドレスを処理要素に割り当てる必要があります。
<P>

<H2 ID="4.3">4.3 リモートコンピュータからの接続</H2>
リモートコンピュータからループバックネットワークアダプタ上のIPアドレスを割り当てた受信要素
（クライアントからの接続を受付けることができる処理要素）に接続する場合，
実ネットワークからループバックネットワークへのルーティングが必要となります。<P>

<IMG SRC="route.jpg"><P>
例えば上の図のリモートコンピュータから受信要素AおよびBに接続するためには，リモートコンピュータで下記の設定を行う
必要があります。<BR>
<UL>
<LI>routeコマンドによるルーティングの設定<BR>
<div class=spc>
リモートコンピュータのコマンドプロンプトから，以下のコマンドを実行します。<P>
route add 192.168.20.0 mask 255.255.255.0 192.168.0.3
</div><P>
<LI>Routing and Remote Accessサービスの開始<BR>
<div class=spc>
コントロールパネルの「サービス」から"Routing and Remote Access"サービスを開始します。
</div><P>
</UL>
<P>

</BODY>
